{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\35987\\\\Documents\\\\betty-assessment\\\\src\\\\components\\\\carousel\\\\carousel.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useCallback, useState, useRef } from \"react\";\nimport { getAllMockImages } from \"../../services/image-service\";\nimport { useDebounce } from \"./hooks/use-debounce\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst recordsPerLoad = 10;\nconst PreloadImage = ({\n  src\n}) => {\n  _s();\n  useEffect(() => {\n    const img = new Image();\n    img.src = src;\n  }, [src]);\n  return null;\n};\n_s(PreloadImage, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = PreloadImage;\nconst Carousel = () => {\n  _s2();\n  var _activeImage$urls, _activeImage$links;\n  const imagesWrapperRef = useRef(null);\n  const [page, setPage] = useState(1);\n  console.log(\"page\", page);\n  const [imgIndex, setImgIndex] = useState(0);\n  const [imagesData, setImagesData] = useState();\n  console.log(\"imagesData\", imagesData);\n  const [activeImage, setActiveImage] = useState();\n  const setWheelData = (...args) => {\n    const val = args === null || args === void 0 ? void 0 : args[0];\n    if (imgIndex + 1 === (imagesData === null || imagesData === void 0 ? void 0 : imagesData.length)) {\n      setImgIndex(0);\n    } else if (val) {\n      setImgIndex(old => old += 1);\n    } else if (imgIndex > 0) {\n      setImgIndex(old => old -= 1);\n    }\n  };\n  const debounce = useDebounce(setWheelData, 60);\n  const getImages = useCallback(async () => {\n    const data = await getAllMockImages(page);\n    if (page === 1) {\n      setActiveImage(data === null || data === void 0 ? void 0 : data[0]);\n    }\n    setImagesData(old => {\n      if (old !== null && old !== void 0 && old.length) {\n        return [...old, ...data];\n      } else {\n        return data;\n      }\n    });\n  }, [page]);\n  useEffect(() => {\n    console.log(\"imgIndex\", imgIndex);\n    if (imgIndex % recordsPerLoad === 5 && imgIndex >= page * recordsPerLoad - 5) {\n      setPage(old => old += 1);\n    }\n    setActiveImage(imagesData === null || imagesData === void 0 ? void 0 : imagesData[imgIndex]);\n  }, [imgIndex, imagesData]);\n  useEffect(() => {\n    getImages();\n  }, [getImages]);\n  const handleWheel = event => {\n    const scrollSpeed = event.deltaY;\n    debounce(scrollSpeed);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"images-wrapper\",\n      ref: imagesWrapperRef,\n      onWheel: handleWheel,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: activeImage === null || activeImage === void 0 ? void 0 : (_activeImage$urls = activeImage.urls) === null || _activeImage$urls === void 0 ? void 0 : _activeImage$urls.full,\n        alt: activeImage === null || activeImage === void 0 ? void 0 : (_activeImage$links = activeImage.links) === null || _activeImage$links === void 0 ? void 0 : _activeImage$links.slug\n      }, activeImage === null || activeImage === void 0 ? void 0 : activeImage.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), imagesData && imagesData.slice(-recordsPerLoad).map(elm => {\n        var _elm$urls;\n        return /*#__PURE__*/_jsxDEV(PreloadImage, {\n          src: elm === null || elm === void 0 ? void 0 : (_elm$urls = elm.urls) === null || _elm$urls === void 0 ? void 0 : _elm$urls.full\n        }, elm.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 20\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s2(Carousel, \"v4t3YnQXHPRM1TPaM3kKiTSWJ7g=\", false, function () {\n  return [useDebounce];\n});\n_c2 = Carousel;\nexport default Carousel;\nvar _c, _c2;\n$RefreshReg$(_c, \"PreloadImage\");\n$RefreshReg$(_c2, \"Carousel\");","map":{"version":3,"names":["React","useEffect","useCallback","useState","useRef","getAllMockImages","useDebounce","jsxDEV","_jsxDEV","Fragment","_Fragment","recordsPerLoad","PreloadImage","src","_s","img","Image","_c","Carousel","_s2","_activeImage$urls","_activeImage$links","imagesWrapperRef","page","setPage","console","log","imgIndex","setImgIndex","imagesData","setImagesData","activeImage","setActiveImage","setWheelData","args","val","length","old","debounce","getImages","data","handleWheel","event","scrollSpeed","deltaY","children","id","ref","onWheel","urls","full","alt","links","slug","fileName","_jsxFileName","lineNumber","columnNumber","slice","map","elm","_elm$urls","_c2","$RefreshReg$"],"sources":["C:/Users/35987/Documents/betty-assessment/src/components/carousel/carousel.jsx"],"sourcesContent":["import React, { useEffect, useCallback, useState, useRef } from \"react\";\r\n\r\nimport { getAllMockImages } from \"../../services/image-service\";\r\nimport { useDebounce } from \"./hooks/use-debounce\";\r\n\r\nconst recordsPerLoad = 10;\r\n\r\nconst PreloadImage = ({ src }) => {\r\n  useEffect(() => {\r\n    const img = new Image();\r\n    img.src = src;\r\n  }, [src]);\r\n\r\n  return null;\r\n};\r\n\r\nconst Carousel = () => {\r\n  const imagesWrapperRef = useRef(null);\r\n\r\n  const [page, setPage] = useState(1);\r\n  console.log(\"page\", page);\r\n  const [imgIndex, setImgIndex] = useState(0);\r\n  const [imagesData, setImagesData] = useState();\r\n  console.log(\"imagesData\", imagesData);\r\n  const [activeImage, setActiveImage] = useState();\r\n\r\n  const setWheelData = (...args) => {\r\n    const val = args?.[0];\r\n\r\n    if (imgIndex + 1 === imagesData?.length) {\r\n      setImgIndex(0);\r\n    } else if (val) {\r\n      setImgIndex((old) => (old += 1));\r\n    } else if (imgIndex > 0) {\r\n      setImgIndex((old) => (old -= 1));\r\n    }\r\n  };\r\n\r\n  const debounce = useDebounce(setWheelData, 60);\r\n\r\n  const getImages = useCallback(async () => {\r\n    const data = await getAllMockImages(page);\r\n\r\n    if (page === 1) {\r\n      setActiveImage(data?.[0]);\r\n    }\r\n\r\n    setImagesData((old) => {\r\n      if (old?.length) {\r\n        return [...old, ...data];\r\n      } else {\r\n        return data;\r\n      }\r\n    });\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"imgIndex\", imgIndex);\r\n    if (\r\n      imgIndex % recordsPerLoad === 5 &&\r\n      imgIndex >= page * recordsPerLoad - 5\r\n    ) {\r\n      setPage((old) => (old += 1));\r\n    }\r\n\r\n    setActiveImage(imagesData?.[imgIndex]);\r\n  }, [imgIndex, imagesData]);\r\n\r\n  useEffect(() => {\r\n    getImages();\r\n  }, [getImages]);\r\n\r\n  const handleWheel = (event) => {\r\n    const scrollSpeed = event.deltaY;\r\n\r\n    debounce(scrollSpeed);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div id=\"images-wrapper\" ref={imagesWrapperRef} onWheel={handleWheel}>\r\n        <img\r\n          key={activeImage?.id}\r\n          src={activeImage?.urls?.full}\r\n          alt={activeImage?.links?.slug}\r\n        />\r\n\r\n        {imagesData &&\r\n          imagesData.slice(-recordsPerLoad).map((elm) => {\r\n            return <PreloadImage src={elm?.urls?.full} key={elm.id} />;\r\n          })}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Carousel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}